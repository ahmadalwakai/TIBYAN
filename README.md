# ØªØ¨ÙŠØ§Ù† | Tibyan LMS

<div align="center">

![Tibyan Logo](https://via.placeholder.com/150x150?text=ØªØ¨ÙŠØ§Ù†)

**Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø´Ø±Ø¹ÙŠØ© ÙˆØ§Ù„Ø¹Ø±Ø¨ÙŠØ©**

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/ahmadalwakai/TIBYAN)

[Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©](#Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©) | [English](#english)

</div>

---

## Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

### Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©

ØªØ¨ÙŠØ§Ù† (TBY) Ù‡ÙŠ Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø¹Ø±Ø¨ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø© Ù…Ø¨Ù†ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Next.js App Router Ùˆ TypeScript Ùˆ Chakra UI.

### Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª

- ðŸŒ Ø¯Ø¹Ù… 7 Ù„ØºØ§Øª (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©ØŒ Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ Ø§Ù„Ø£Ù„Ù…Ø§Ù†ÙŠØ©ØŒ Ø§Ù„ØªØ±ÙƒÙŠØ©ØŒ Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©ØŒ Ø§Ù„Ø¥Ø³Ø¨Ø§Ù†ÙŠØ©ØŒ Ø§Ù„Ø³ÙˆÙŠØ¯ÙŠØ©)
- ðŸŽ¨ ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø­Ø¯ÙŠØ«Ø© Ù…Ø¹ Ø¯Ø¹Ù… RTL
- ðŸ‘¨â€ðŸ’¼ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø¥Ø¯Ø§Ø±ÙŠØ© Ù…ØªÙƒØ§Ù…Ù„Ø©
- ðŸ“š Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¯ÙˆØ±Ø§Øª
- ðŸ’³ Ù†Ø¸Ø§Ù… Ù…Ø¯ÙÙˆØ¹Ø§Øª Ù…ØªÙƒØ§Ù…Ù„
- ðŸ‘¨â€ðŸ« Ù†Ø¸Ø§Ù… Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
- ðŸ” Ù†Ø¸Ø§Ù… Ù…ØµØ§Ø¯Ù‚Ø© Ø¢Ù…Ù†

### Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…Ø­Ù„ÙŠ

```bash
# Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
git clone https://github.com/ahmadalwakai/TIBYAN.git
cd TIBYAN

# ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø²Ù…
npm install

# Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
cp .env.example .env
# Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ .env Ø¨Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ

# ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ±Ø­ÙŠÙ„Ø§Øª
npx prisma db push

# ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙŠØ±ÙØ±
npm run dev
```

Ø§ÙØªØ­ http://localhost:3000 Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.

---

## English

### Overview

Tibyan (TBY) is an Arabic-first LMS built with Next.js App Router, TypeScript, and Chakra UI.

### Portal Definitions

- **Student Portal (/student)**: Enrolled learner experience (courses, progress, certificates, enrollment payments, reviews). Access requires role=STUDENT and verified email.
- **Member Portal (/member)**: Community/club membership experience (member-only resources, perks, community features, member settings). Access requires role=MEMBER. Email verification for members is optional by policy to reduce onboarding friction.

### Features

- ðŸŒ 7 language support (Arabic, English, German, Turkish, French, Spanish, Swedish)
- ðŸŽ¨ Modern UI with RTL support
- ðŸ‘¨â€ðŸ’¼ Full admin dashboard
- ðŸ“š Course management system
- ðŸ’³ Integrated payment system
- ðŸ‘¨â€ðŸ« Teacher application workflow
- ðŸ” Secure authentication

### Local Installation

```bash
# Clone the repository
git clone https://github.com/ahmadalwakai/TIBYAN.git
cd TIBYAN

# Install dependencies
npm install

# Setup database
cp .env.example .env
# Edit .env with your database credentials

# Run migrations
npx prisma db push

# Start development server
npm run dev
```

Open http://localhost:3000 to view the app.

---

## ðŸš€ Deploy to Vercel

### One-Click Deploy

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/ahmadalwakai/TIBYAN&env=DATABASE_URL,JWT_SECRET&envDescription=Required%20environment%20variables&envLink=https://github.com/ahmadalwakai/TIBYAN%23environment-variables)

### Manual Deploy

1. Push your code to GitHub
2. Import project in [Vercel Dashboard](https://vercel.com/new)
3. Add environment variables:
   - `DATABASE_URL` - PostgreSQL connection string
   - `DIRECT_DATABASE_URL` - Direct database URL (for migrations)
   - `JWT_SECRET` - Custom JWT auth secret (min 32 chars)

### Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `DATABASE_URL` | âœ… | PostgreSQL connection string with pooling |
| `DIRECT_DATABASE_URL` | âœ… | Direct PostgreSQL URL (no pooling) |
| `JWT_SECRET` | âœ… | Secret for custom JWT auth (min 32 chars) |
| `NEXT_PUBLIC_APP_URL` | âŒ | Public app URL |
| `RESEND_API_KEY` | âŒ | Email service for auth emails |

### AI Agent Providers

Tibyan ships with a tiered LLM provider stack for the in-app AI agent:

- `LLM_PROVIDER` supports `local`, `zyphon`, `mock`, or `auto` (default). Auto mode tries the local llama.cpp server first, then Zyphon Cloud, and finally falls back to the mock provider.
- Local mode uses the bundled llama.cpp tooling (`LLAMA_SERVER_URL`, `LLM_TIMEOUT_MS`, etc.).
- Zyphon Cloud mode requires `ZYPHON_API_KEY`, with optional tuning via `ZYPHON_API_BASE_URL`, `ZYPHON_MODEL_ID`, `ZYPHON_ORG_ID`, and `ZYPHON_TIMEOUT_MS`.
- Mock mode stays entirely offline with deterministic Arabic-first replies.

> **Tip:** Committers should keep local development on `LLM_PROVIDER=auto` so the AI agent automatically degrades to mock responses when neither the local server nor Zyphon are available.

### Recommended Database Providers

- [Vercel Postgres](https://vercel.com/storage/postgres) - Seamless integration
- [Neon](https://neon.tech) - Serverless PostgreSQL
- [Supabase](https://supabase.com) - Open source alternative
- [PlanetScale](https://planetscale.com) - MySQL compatible

---

## ðŸ“ Project Structure

```
tibyan/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/              # Next.js App Router pages
â”‚   â”‚   â”œâ”€â”€ admin/        # Admin dashboard
â”‚   â”‚   â”œâ”€â”€ api/          # API routes
â”‚   â”‚   â”œâ”€â”€ auth/         # Authentication pages
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ components/       # React components
â”‚   â”œâ”€â”€ lib/              # Utilities & helpers
â”‚   â”œâ”€â”€ i18n/             # Internationalization
â”‚   â””â”€â”€ theme/            # Chakra UI theme
â”œâ”€â”€ prisma/               # Database schema
â”œâ”€â”€ messages/             # Translation files
â””â”€â”€ docs/                 # Documentation
```

## ðŸ“š Documentation

- [Architecture](docs/ARCHITECTURE.md)
- [Admin System](docs/ADMIN_SYSTEM.md)
- [Content Migration](docs/CONTENT_MIGRATION.md)

## ðŸ›  Tech Stack

- **Framework:** Next.js 16 (App Router)
- **Language:** TypeScript
- **UI:** Chakra UI v3
- **Database:** PostgreSQL + Prisma
- **Auth:** Custom JWT cookies (jose library)
- **i18n:** next-intl
- **Styling:** Emotion

## ðŸ” Authentication

> **Important:** This app uses **custom JWT cookie-based authentication**. NextAuth is NOT used.

- JWT tokens signed with `jose` library, stored in `auth-token` httpOnly cookie
- User metadata in `user-data` cookie (client-readable)
- CSRF protection via `csrf-token` cookie
- See `src/lib/jwt.ts`, `src/lib/auth.ts`, `src/lib/api-auth.ts` for implementation

## ðŸ“„ License

MIT Â© 2026 Tibyan
